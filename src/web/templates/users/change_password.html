{% extends "base.html" %}

{% block title %}Change Password - CTV Booked Biz{% endblock %}

{% block header_title %}Change Password{% endblock %}
{% block header_subtitle %}Update your account password{% endblock %}

{% block content %}
<div class="user-form">
    <div style="max-width: 600px; margin: 0 auto;">
        <form method="POST" action="{{ url_for('user_management.change_password') }}" 
              style="background: white; padding: 32px; border-radius: 8px; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
            
            <div style="margin-bottom: 24px;">
                <label for="old_password" style="display: block; margin-bottom: 8px; font-weight: 500; color: #2d3748;">
                    Current Password *
                </label>
                <input type="password" id="old_password" name="old_password" required
                       style="width: 100%; padding: 10px 12px; border: 2px solid #e2e8f0; border-radius: 6px; 
                              font-size: 14px; transition: border-color 0.2s;"
                       onfocus="this.style.borderColor='var(--nord10)'" 
                       onblur="this.style.borderColor='#e2e8f0'">
            </div>

            <div style="margin-bottom: 24px;">
                <label for="new_password" style="display: block; margin-bottom: 8px; font-weight: 500; color: #2d3748;">
                    New Password * (min 8 characters)
                </label>
                <input type="password" id="new_password" name="new_password" required minlength="8"
                       style="width: 100%; padding: 10px 12px; border: 2px solid #e2e8f0; border-radius: 6px; 
                              font-size: 14px; transition: border-color 0.2s;"
                       onfocus="this.style.borderColor='var(--nord10)'" 
                       onblur="this.style.borderColor='#e2e8f0'">
            </div>

            <div style="margin-bottom: 32px;">
                <label for="confirm_password" style="display: block; margin-bottom: 8px; font-weight: 500; color: #2d3748;">
                    Confirm New Password *
                </label>
                <input type="password" id="confirm_password" name="confirm_password" required minlength="8"
                       style="width: 100%; padding: 10px 12px; border: 2px solid #e2e8f0; border-radius: 6px; 
                              font-size: 14px; transition: border-color 0.2s;"
                       onfocus="this.style.borderColor='var(--nord10)'" 
                       onblur="this.style.borderColor='#e2e8f0'">
                <div style="font-size: 12px; color: #718096; margin-top: 4px;">
                    Passwords must match
                </div>
            </div>

            <div style="display: flex; gap: 12px; justify-content: flex-end;">
                <a href="{{ url_for('user_management.profile') }}" 
                   style="padding: 10px 24px; background: #e2e8f0; color: #4a5568; border-radius: 6px; 
                          text-decoration: none; font-weight: 500; transition: all 0.2s;"
                   onmouseover="this.style.background='#cbd5e0'" 
                   onmouseout="this.style.background='#e2e8f0'">
                    Cancel
                </a>
                <button type="submit" 
                        style="padding: 10px 24px; background: linear-gradient(135deg, var(--nord10) 0%, var(--nord9) 100%); 
                               color: white; border: none; border-radius: 6px; font-weight: 600; cursor: pointer; 
                               transition: all 0.2s; box-shadow: 0 2px 4px rgba(94, 129, 172, 0.3);"
                        onmouseover="this.style.transform='translateY(-1px)'; this.style.boxShadow='0 4px 8px rgba(94, 129, 172, 0.4)'"
                        onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 4px rgba(94, 129, 172, 0.3)'">
                    Change Password
                </button>
            </div>
        </form>
    </div>
</div>

<script>
// Client-side password confirmation check
document.getElementById('confirm_password').addEventListener('input', function() {
    const newPassword = document.getElementById('new_password').value;
    const confirmPassword = this.value;
    
    if (confirmPassword && newPassword !== confirmPassword) {
        this.setCustomValidity('Passwords do not match');
        this.style.borderColor = 'var(--nord11)';
    } else {
        this.setCustomValidity('');
        this.style.borderColor = '#e2e8f0';
    }
});
</script>
{% endblock %}
